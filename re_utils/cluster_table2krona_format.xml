<tool id="cluster_table2krona_format" name="Convert RepeatExplorer2 CLUSTER_table.csv to Krona formatted input " version="1.0.0.3" python_template_version="3.5">
    <required_files>
        <include type="literal" path="cluster_table2krona_format.py"/>
    </required_files>
    <command detect_errors="exit_code"><![CDATA[
        python '$__tool_directory__'/cluster_table2krona_format.py --input ${input} --output ${output}
        #if $column == "Final_annotation"
        -m
        #end if
    ]]></command>
    <inputs>
        <param type="data" name="input" format="txt" label="CLUSTER_table.csv" />
        <param name="column" type="select" label="What annotation column do you want to include in the output?">
          <option value="Final_annotation" >Final_annotation </option>
          <option value="Automatic_annotation" selected="true" >Automatic_annotation </option>
        </param>
    </inputs>
    <outputs>
      <data format="tabular" name="output" label="RepeatExplorer cluster annotation formatted for Krona visualization from data ${input.hid}"/>
    </outputs>/
    <help><![CDATA[
        This tool converts CLUSTER_table.csv RepeatExplorer2 output to file which can be visualized with Krona. As input use CLUSTER_table.csv obtained from RepeatExplorer2 analysis. Example of CLUSTER_table.csv::


        '"Number_of_reads_in_clusters"	3002					'
        '"Number_of_clusters"	895					'
        '"Number_of_superclusters"	895					'
        '"Number_of_singlets"	6998					'
        '"Number_of_analyzed_reads"	10000					'
        '"Cluster"	"Supercluster"	"Size"	"Size_adjusted"	"Automatic_annotation"	"TAREAN_annotation"	"Final_annotation"'
        '1 	1	61	61	"All"	"Other"	""'
        '2	2	59	59	"All/repeat/satellite"	"Putative satellites (high confidence)"	""'
        '3	3	45	45	"All/repeat/satellite"	"Putative satellites (low confidence)"	""'
        '4	4	38	38	"All"	"Other"	""'
        '5	5	32	32	"All"	"Other"	""'
        '6	6	28	28	"All"	"Other"	""'
        '7	7	25	25	"All"	"Other"	""'
        '8	8	24	24	"All"	"Other"	""'
        '9	9	23	23	"All"	"Other"	""'
        '10	10	22	22	"All/repeat/mobile_element/Class_I/LTR/Ty3_gypsy/non-chromovirus/OTA/Tat/Ogre"	"Other"	""'
        '11	11	20	20	"All"	"Other"	""'
        


Last column "Final_annotation" is intended to be filled manually based on the curation of the automatic anotation results. If you obtain CLUSTER_table.csv directly from RepeatExplorer2 output, you can convert only automatic annotation table.
       
    ]]></help>
</tool>
